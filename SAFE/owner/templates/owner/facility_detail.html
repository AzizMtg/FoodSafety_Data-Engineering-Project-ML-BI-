<!DOCTYPE html>
<html lang="en">
    {% load static %}
<head>
    <meta charset="utf-8">
    <title>SAFE</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="{% static 'img/favicon.ico' %}" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Nunito:wght@600;700;800&family=Pacifico&display=swap" rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{% static 'lib/animate/animate.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/owlcarousel/assets/owl.carousel.min.css' %}" rel="stylesheet">
    <link href="{% static 'lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css' %}" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->

        <!-- Navbar & Hero Start -->
        <div class="container-xxl position-relative p-0">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4 px-lg-5 py-3 py-lg-0">
                <a href="" class="navbar-brand p-0">
                    <h1 class="text-primary m-0"><i class="fa fa-utensils me-3"></i>SAFE</h1>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="fa fa-bars"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto py-0 pe-4">
                        <a href="{% url 'profileClient' %}" class="nav-item nav-link active">Home</a>
                        <a href="{% url 'clients_list' %}" class="nav-item nav-link active">Facility List</a>
                        <a href="https://app.powerbi.com/reportEmbed?reportId=3fa01422-43e9-4c27-b7af-53c50fc472ca&autoAuth=true&ctid=604f1a96-cbe8-43f8-abbf-f8eaf5d85730" target="_blank" class="nav-item nav-link active">Client Dashboard</a>
                    </div>
                    <a href="{% url 'index' %}" class="btn btn-primary py-2 px-4">LOGOUT</a>
                </div>
            </nav>
        
            <div class="container-xxl py-5 bg-dark hero-header mb-5">
                <div class="container my-5 py-5">
                    <div class="row align-items-center g-5">
                        <div class="col-lg-6 text-center text-lg-start">
                            <h1 class="display-3 text-white animated slideInLeft">Welcome Client<br>{{ user.username }}</h1>
                            <p class="text-white animated slideInLeft mb-4 pb-2">Tempor erat elitr rebum at clita. Diam dolor diam ipsum sit. Aliqu diam amet diam et eos. Clita erat ipsum et lorem et sit, sed stet lorem sit clita duo justo magna dolore erat amet</p>
                        </div>
                        <div class="col-lg-6 text-center text-lg-end overflow-hidden">
                            <img class="img-fluid" src="{% static 'img/client-icon-8.jpg' %}" alt="">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Navbar & Hero End -->

       <!-- Facility Details Start -->
       <div class="container-xxl py-5">
        <div class="container">
             <!-- Smiley face display -->
    <div id="smiley" class="smiley hidden">
        <span id="emoji" class="emoji"></span> <!-- Default sad face -->
    </div>
            <h1 class="mb-4 text-center">Facility Details</h1>
            <div class="card shadow-lg border-0 mx-auto" style="max-width: 600px; position: relative;">
                
                <div class="card-header bg-primary text-white text-center">
                    <h3 class="card-title mb-0">Restaurant Name: {{ facility.facility_name }}</h3>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-start mb-3">
                        <i class="bi bi-geo-alt-fill me-3 text-primary fs-4"></i>
                        <p class="mb-0">
                            <strong>Address:</strong> {{ facility.facility_address }}
                        </p>
                    </div>
                    <div class="d-flex align-items-start mb-3">
                        <i class="bi bi-building me-3 text-primary fs-4"></i>
                        <p class="mb-0">
                            <strong>City:</strong> {{ facility.facility_city }}
                        </p>
                    </div>
                    <div class="d-flex align-items-start mb-3">
                        <i class="bi bi-flag me-3 text-primary fs-4"></i>
                        <p class="mb-0">
                            <strong>State:</strong> {{ facility.facility_state }}
                        </p>
                    </div>
                </div>
                
                <!-- Comment Icon -->
                {% if facility.id %}
                    <a href="{% url 'create_client' id=facility.id %}" 
                       style="position: absolute; bottom: 15px; right: 15px; text-decoration: none;">
                        <i class="fa fa-comment" style="font-size: 2rem; color: #ff8800;"></i>
                    </a>
                {% endif %}
    
                <div class="card-footer text-center bg-light">
                    <a href="{% url 'clients_list' %}" class="btn btn-outline-primary">
                        <i class="bi bi-arrow-left"></i> Back to Facilities List
                    </a>
                </div>
            </div>
        </div>
    </div>
    
<!-- Facility Details End -->
<div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
   
    <div class="container">
        <div class="text-center">
            <h5 class="section-title ff-secondary text-center text-primary fw-normal">Sentiments</h5>
            <h1 class="mb-5">Our Clients Say!!!</h1>
        </div>

        <!-- Client Reviews Section with Horizontal Scrolling -->
        <div class="scroll-container">
            <div class="row g-4">
                {% for client in clients %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-lg">
                        <div class="card-body">
                            <i class="fa fa-quote-left fa-2x text-primary mb-3"></i>
                            <p class="card-text">{{ client.Comment }}</p>
                            
                            <!-- Ratings and Scores -->
                            <div>
                                <p class="mb-1"><strong>Star Rating:</strong> {{ client.StarRating }}</p>
                                <p class="mb-1"><strong>Ambience Score:</strong> {{ client.AmbienceScore }}</p>
                                <p class="mb-1"><strong>Service Quality Score:</strong> {{ client.ServiceQualityScore }}</p>
                            </div>

                            <!-- Sentiment Badge -->
                            <div>
                                <span class="badge {% if client.Sentiment == 'Satisfied' %}bg-success{% else %}bg-danger{% endif %}">
                                    {{ client.Sentiment }}
                                </span>
                                <span class="sentiment" style="display: none;">{{ client.Sentiment }}</span>
                            </div>
                        </div>

                        <!-- Actions Section -->
                        <div class="card-footer bg-light d-flex justify-content-between align-items-center">
                            <a href="{% url 'update_client' client.id %}" class="text-primary" title="Edit">
                                <i class="fa fa-edit" style="font-size: 1.5rem; color: #ff8800;"></i>
                            </a>
                            <form method="POST" action="{% url 'delete_client' client.id %}" class="m-0 p-0" style="display: inline;">
                                {% csrf_token %}
                                <button type="submit" onclick="return confirm('Are you sure you want to delete this review?')" class="btn btn-link text-danger" title="Delete">
                                    <i class="fa fa-trash" style="font-size: 1.5rem; color: #ff8800;"></i>
                                </button>
                            </form>
                            
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
<br>





<!-- Reviews List End -->

    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-light footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
        <div class="container py-5">
            <div class="row g-5">
                <div class="col-lg-3 col-md-6">
                    <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Company</h4>
                    <a class="btn btn-link" href="">About Us</a>
                    <a class="btn btn-link" href="">Contact Us</a>
                    <a class="btn btn-link" href="">Reservation</a>
                    <a class="btn btn-link" href="">Privacy Policy</a>
                    <a class="btn btn-link" href="">Terms & Condition</a>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Contact</h4>
                    <p class="mb-2"><i class="fa fa-map-marker-alt me-3"></i>123 Street, New York, USA</p>
                    <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+012 345 67890</p>
                    <p class="mb-2"><i class="fa fa-envelope me-3"></i>info@example.com</p>
                    <div class="d-flex pt-2">
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-youtube"></i></a>
                        <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h4 class="section-title ff-secondary text-start text-primary fw-normal mb-4">Opening</h4>
                    <h5 class="text-light fw-normal">Monday - Saturday</h5>
                    <p>09AM - 09PM</p>
                    <h5 class="text-light fw-normal">Sunday</h5>
                    <p>10AM - 08PM</p>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                        &copy; <a class="border-bottom" href="#">SAFE</a>, All Right Reserved. 
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        <div class="footer-menu">
                            <a href="">Home</a>
                            <a href="">Cookies</a>
                            <a href="">Help</a>
                            <a href="">FQAs</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>

<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'lib/wow/wow.min.js' %}"></script>
<script src="{% static 'lib/easing/easing.min.js' %}"></script>
<script src="{% static 'lib/waypoints/waypoints.min.js' %}"></script>
<script src="{% static 'lib/counterup/counterup.min.js' %}"></script>
<script src="{% static 'lib/owlcarousel/owl.carousel.min.js' %}"></script>
<script src="{% static 'lib/tempusdominus/js/moment.min.js' %}"></script>
<script src="{% static 'lib/tempusdominus/js/moment-timezone.min.js' %}"></script>
<script src="{% static 'lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"></script>

<!-- Template Javascript -->
<script src="{% static 'js/main.js' %}"></script>
<style>
    .smiley {
        display: none; /* Masquer les smileys au départ */
    }
    
    #smiley {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgba(0, 0, 0, 0.5); /* Fond semi-transparent */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999; /* Au-dessus des autres éléments */
        opacity: 0; /* Caché par défaut */
        pointer-events: none; /* Ne bloque pas les clics sur d'autres éléments */
        transition: opacity 1s; /* Transition pour disparaître en douceur */
    }
    
    #smiley.show {
        opacity: 1; /* Rendre visible quand la classe "show" est ajoutée */
    }
    .btn-link {
        background: none;
        border: none;
        text-decoration: underline;
        cursor: pointer;
        font-size: inherit;
        font-family: inherit;
        padding: 0;
    }
    .scroll-container {
        overflow-x: auto; /* Enables horizontal scrolling */
        white-space: nowrap; /* Prevents items from wrapping to the next line */
        padding-bottom: 20px; /* Adds space for the scrollbar */
    }
    
    .scroll-container .row {
        display: flex; /* Make the items align in a row */
        flex-wrap: nowrap; /* Prevents wrapping of items */
    }
    
    .scroll-container .col-md-6 {
        flex: 0 0 auto; /* Prevents the column from shrinking or stretching */
        margin-right: 20px; /* Adds space between each client card */
    }
    
    .scroll-container::-webkit-scrollbar {
        height: 8px; /* Controls the height of the scrollbar */
    }
    
    .scroll-container::-webkit-scrollbar-thumb {
        background-color: #888; /* Color of the scrollbar */
        border-radius: 4px;
    }
    
    .scroll-container::-webkit-scrollbar-thumb:hover {
        background-color: #555; /* Hover color of the scrollbar */
    }
    
    
</style>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        function showSmiley() {
            const smiley = document.getElementById("smiley");
            const emoji = document.createElement("img");  // Créer un élément img
            const sentiment = document.querySelector(".sentiment").textContent.trim(); // Get sentiment value

            // Choisir le GIF en fonction du sentiment
            if (sentiment === "Satisfied") {
                emoji.src = "{% static 'img/happy.gif' %}";  // Remplacer par le chemin relatif vers votre GIF heureux
            } else {
                emoji.src = "{% static 'img/sad.gif' %}";  // Remplacer par le chemin relatif vers votre GIF triste
            }

            emoji.alt = sentiment; // Ajoute une description au GIF
            smiley.innerHTML = ""; // Vide l'élément avant d'ajouter le nouvel emoji
            smiley.appendChild(emoji); // Ajoute l'emoji à l'élément smiley

            // Afficher le smiley
            smiley.classList.add("show");

            // Cacher le smiley après 3 secondes (vous pouvez ajuster le délai)
            setTimeout(function() {
                smiley.classList.remove("show");
            }, 3000); // 3 secondes
        }

        // Appelez la fonction showSmiley pour afficher l'emoji
        showSmiley();
    });
</script>
</body>
</html>
